<form theme="dark">
  <label>Stocks</label>
  <fieldset submitButton="false"></fieldset>
  <row>
    <panel>
      <title>Stocks Summary</title>
      <table>
        <title>Sorted by signal, bullishPercent, newsScore, articlesLastWeek, and change</title>
        <search>
          <query>| quote
| spath
| convert num(quote.c), num(quote.pc)
| eval change = ('quote.c'/'quote.pc'-1)*100, signalRating = case('technicalAnalysis.signal' = "strong buy", 5, 'technicalAnalysis.signal' = "buy", 4, 'technicalAnalysis.signal' = "neutral", 3, 'technicalAnalysis.signal' = "sell", 2, 'technicalAnalysis.signal' = "strong sell", 1, true(), 0)
| table ticker change quote.c quote.pc signalRating technicalAnalysis.signal sentiment.buzz.articlesInLastWeek sentiment.buzz.weeklyAverage sentiment.companyNewsScore sentiment.sectorAverageNewsScore sentiment.buzz.buzz sentiment.sentiment.bullishPercent sentiment.sectorAverageBullishPercent
| sort - signalRating sentiment.sentiment.bullishPercent sentiment.companyNewsScore sentiment.buzz.articlesInLastWeek +change
| fields - signalRating
| rename quote.c as close, quote.pc as prevClose, technicalAnalysis.signal as signal, sentiment.buzz.articlesInLastWeek as articlesLastWeek, sentiment.buzz.weeklyAverage as weeklyAverage, sentiment.companyNewsScore as newsScore, sentiment.sectorAverageNewsScore as sectorAvgNewsScore, sentiment.buzz.buzz as buzz, sentiment.sentiment.bullishPercent as bullishPercent, sentiment.sectorAverageBullishPercent as sectorAvgBullishPercent</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">row</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <format type="color" field="change">
          <colorPalette type="minMidMax" maxColor="#53A051" midColor="#FFFFFF" minColor="#DC4E41"></colorPalette>
          <scale type="minMidMax" maxValue="3.5" midValue="0" minValue="-3.5"></scale>
        </format>
        <format type="number" field="change">
          <option name="unit">%</option>
        </format>
        <drilldown>
          <set token="ticker">$click.value$</set>
        </drilldown>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <title>Search</title>
      <input type="text" token="ticker" searchWhenChanged="true">
        <label>Symbol(s)</label>
        <default>TSLA</default>
      </input>
      <event>
        <search>
          <query>| quote $ticker$</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="list.drilldown">none</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">0</option>
        <option name="table.drilldown">all</option>
        <option name="table.sortDirection">asc</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
      </event>
    </panel>
    <panel>
      <title>ETF Ratings</title>
      <table>
        <title>Sorted by signal and change</title>
        <search>
          <query>| quote QQQ TQQQ VGT VYM SPHD
| spath
| convert num(quote.c), num(quote.pc)
| eval change = ('quote.c'/'quote.pc'-1)*100, signalRating = case('technicalAnalysis.signal' = "strong buy", 5, 'technicalAnalysis.signal' = "buy", 4, 'technicalAnalysis.signal' = "neutral", 3, 'technicalAnalysis.signal' = "sell", 2, 'technicalAnalysis.signal' = "strong sell", 1, true(), 0)
| table ticker change quote.c quote.pc signalRating technicalAnalysis.signal
| sort - signalRating +change
| fields - signalRating
| rename quote.c as close, quote.pc as prevClose, technicalAnalysis.signal as signal</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">row</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <format type="color" field="change">
          <colorPalette type="minMidMax" maxColor="#53A051" midColor="#FFFFFF" minColor="#DC4E41"></colorPalette>
          <scale type="minMidMax" maxValue="3.5" midValue="0" minValue="-3.5"></scale>
        </format>
        <format type="number" field="change">
          <option name="unit">%</option>
        </format>
        <drilldown>
          <set token="ticker">$click.value$</set>
        </drilldown>
      </table>
    </panel>
  </row>
</form>
